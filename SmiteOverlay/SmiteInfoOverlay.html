<!DOCTYPE html>
<html>
    <head>
        <script src="Gods.json"></script>
        <script src="Items.json"></script>
        <script>
            (async () => {
                const PARAMS = new URLSearchParams(window.location.search);
                const SERVER = 'https://server-08-kirbout.replit.app';
                let Req = await fetch(`${SERVER}/requestsession`);
                let Data = await Req.text();
                Req = await fetch(`${SERVER}/requestmatchhistory?ID=${Data}&USER=${PARAMS.get('ID')}`);
                Data = await Req.json();
                console.log(Data[0]);
                for (God of ENGLISH_Gods.Gods) if (God.Id === Data[0].GodId) GOD.src = God.Icon;
                KDA.innerHTML = `${Data[0].Kills}/${Data[0].Deaths}/${Data[0].Assists}`;
                Status.innerHTML = Data[0].Win_Status == 'Win' ? '<span style="color:#83d486">WIN</span>' : '<span style="color:#bf7777">LOSS</span>';
                for (let itemIndex = 0; itemIndex < 6; itemIndex++)
                    for (item of ENGLISH_Items.Items)
                        if (item.Id === Data[0]['ItemId' + (itemIndex + 1).toString()]) 
                            document.querySelectorAll('.item')[itemIndex].src = item.URL;
                switch (Data[0].Role) {
                    case 'Carry': ROLE.src = 'Carry.png'; break;
                    case 'Jungle': ROLE.src = 'Jungle.png'; break;
                    case 'Mid': ROLE.src = 'Mid.png'; break;
                    case 'Solo': ROLE.src = 'Solo.png'; break;
                    case 'Support': ROLE.src = 'Support.png'; break;
                }
            })();

        </script>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Jockey+One&display=swap');

            #Content {
                height: 100px;
                width: 850px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 70px 0 70px;
                font-family: 'Jockey One', sans-serif;
                font-size: 40px;
                background-color: #454545;
                color: white;
                border-radius: 6px;
            }

            #Content img { height: 75px; width: 75px; border-radius: 8px; }

            #ITEMS {
                height: 70px; width: 400px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: wrap;
            }

            #ITEMS .item {
                margin: 5px;
                height: 50px; width: 50px;
            }

        </style>
    </head>
    <body>
        <div id="Content">
            <img id="ROLE" src="">
            <img id="GOD" src="" style="margin-left: 20px">
            <div id="ITEMS" style="margin-left: 20px">
                <img class="item" src="">
                <img class="item" src="">
                <img class="item" src="">
                <img class="item" src="">
                <img class="item" src="">
                <img class="item" src="">
            </div>
            <div id="KDA" style="margin-left: 20px"></div>
            <div id="Status" style="margin-left: 20px"></div>
        </div>

    </body>
</html>