<!DOCTYPE html>
<html>
    <head>
        <script src="Gods.json"></script>
        <script src="Items.json"></script>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Jockey+One&display=swap');

            #Content {
                height: 100px;
                width: 850px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 70px 0 70px;
                font-family: 'Jockey One', sans-serif;
                font-size: 40px;
                background-color: #131e57;
                color: white;
                border-radius: 4vw;
            }

            #Content img { 
                height: 75px; 
                width: 75px; 
                border-radius: 8px;
                border: 2px inset #8d8f2f;
            }

            #ITEMS {
                height: 70px; width: 400px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: wrap;
            }

            #ITEMS .item {
                margin: 5px;
                height: 50px; width: 50px;
            }

            #Relics img {
                height: 40px; width: 40px;
            }

            #Relics {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

        </style>
    </head>
    <body>
        <div id="Content">
            <img id="ROLE" src="https://static.wikia.nocookie.net/smite_gamepedia/images/0/0b/NewUI_Class_Unknown.png/revision/latest/scale-to-width-down/120?cb=20180903051842" style="border: none !important;">
            <img id="GOD" src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401" style="margin-left: 20px">
            <div id="Relics" style="margin-left: 10px">
                <img src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
                <img src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
            </div>
            <div id="ITEMS" style="margin-left: 10px">
                <img class="item" src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
                <img class="item" src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
                <img class="item" src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
                <img class="item" src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
                <img class="item" src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
                <img class="item" src="https://static.wikia.nocookie.net/smite_gamepedia/images/b/b1/Prestige_Border_0.png/revision/latest/scale-to-width-down/120?cb=20171009154401">
            </div>
            <div id="KDA" style="margin-left: 20px"></div>
            <div id="Status" style="margin-left: 20px"></div>
        </div>
        <script>
            (async () => {
                const PARAMS = new URLSearchParams(window.location.search);
                const SERVER = 'https://server-08-kirbout.replit.app';
                
                if (PARAMS.get('BG') === null) Content.style.backgroundColor = '#131e57';
                else Content.style.backgroundColor = '#' + PARAMS.get('BG');

                let Req = await fetch(`${SERVER}/requestsession`);
                let Data = await Req.text();
                Req = await fetch(`${SERVER}/requestmatchhistory?ID=${Data}&USER=${PARAMS.get('ID')}`);
                Data = await Req.json();

                console.log(Data[0]);

                for (God of ENGLISH_Gods) if (God.id == Data[0].GodId) GOD.src = God.godIcon_URL;
                KDA.innerHTML = `${Data[0].Kills}/${Data[0].Deaths}/${Data[0].Assists}`;
                Status.innerHTML = Data[0].Win_Status == 'Win' ? '<span style="color:#83d486">WIN</span>' : '<span style="color:#bf7777">LOSS</span>';

                for (let itemIndex = 0; itemIndex < 6; itemIndex++)
                    for (item of ENGLISH_Items)
                        if (item.ItemId == Data[0]['ItemId' + (itemIndex + 1).toString()]) 
                            document.querySelectorAll('.item')[itemIndex].src = item.itemIcon_URL;

                for (let itemIndex = 0; itemIndex < 2; itemIndex++)
                    for (item of ENGLISH_Items)
                        if (item.ItemId == Data[0]['ActiveId' + (itemIndex + 1).toString()]) 
                            document.querySelectorAll('#Relics img')[itemIndex].src = item.itemIcon_URL;

                switch (Data[0].Role) {
                    case 'Carry': ROLE.src = 'Carry.png'; break;
                    case 'Jungle': ROLE.src = 'Jungle.png'; break;
                    case 'Mid': ROLE.src = 'Mid.png'; break;
                    case 'Solo': ROLE.src = 'Solo.png'; break;
                    case 'Support': ROLE.src = 'Support.png'; break;
                }
            })();

        </script>
    </body>
</html>